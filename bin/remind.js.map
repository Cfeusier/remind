{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///remind.js","webpack:///webpack/bootstrap d8f4443bc9fc3e547609","webpack:///external \"babel-polyfill\"","webpack:///./src/remind.js","webpack:///external \"babel-runtime/core-js/json/stringify\"","webpack:///external \"babel-runtime/helpers/classCallCheck\"","webpack:///external \"babel-runtime/helpers/createClass\"","webpack:///external \"fs\"","webpack:///external \"path\"","webpack:///external \"http\"","webpack:///external \"yargs\"","webpack:///external \"ramda\"","webpack:///external \"twilio\"","webpack:///external \"cron\""],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_1__","__WEBPACK_EXTERNAL_MODULE_3__","__WEBPACK_EXTERNAL_MODULE_4__","__WEBPACK_EXTERNAL_MODULE_5__","__WEBPACK_EXTERNAL_MODULE_6__","__WEBPACK_EXTERNAL_MODULE_7__","__WEBPACK_EXTERNAL_MODULE_8__","__WEBPACK_EXTERNAL_MODULE_9__","__WEBPACK_EXTERNAL_MODULE_10__","__WEBPACK_EXTERNAL_MODULE_11__","__WEBPACK_EXTERNAL_MODULE_12__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_stringify","_stringify2","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_fs","_fs2","_path","_path2","_http","_http2","_yargs","_ramda","_ramda2","_twilio","_twilio2","_cron","__DURATIONS__","h","min","mon","y","d","__TIMEZONE__","__CRON_SCHEDULE__","__JOKE_ENDPOINT__","Remind","__twilio","__fetch","key","__data","JSON","parse","readFileSync","resolve","__reminders","reminders","__sent","sent","__lubo","lubo","__config","config","err","writeFileSync","body","to","phone","from","twilioPhone","cb","writeFile","__payload","Error","reminder","data","sendMessage","__reminder","__handleFailure","bind","length","__interval","every","__duration","__now","Date","now","ts","__elapsed","pop","push","__triggerSMS","_reminder","slice","on","twilioSID","twilioToken","omit","__job","CronJob","__send","__write","start","add","_this","find","propEq","get","resp","__respJSON","chunk","__resp","type","__joke","tag","joke","__idx","findIndex","splice","console","log","__on","__add","__remove","__activate","__routeCommands","argv","remove"],"mappings":"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","file":"remind.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"babel-polyfill\"), require(\"babel-runtime/core-js/json/stringify\"), require(\"babel-runtime/helpers/classCallCheck\"), require(\"babel-runtime/helpers/createClass\"), require(\"fs\"), require(\"path\"), require(\"http\"), require(\"yargs\"), require(\"ramda\"), require(\"twilio\"), require(\"cron\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"remind\", [\"babel-polyfill\", \"babel-runtime/core-js/json/stringify\", \"babel-runtime/helpers/classCallCheck\", \"babel-runtime/helpers/createClass\", \"fs\", \"path\", \"http\", \"yargs\", \"ramda\", \"twilio\", \"cron\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"remind\"] = factory(require(\"babel-polyfill\"), require(\"babel-runtime/core-js/json/stringify\"), require(\"babel-runtime/helpers/classCallCheck\"), require(\"babel-runtime/helpers/createClass\"), require(\"fs\"), require(\"path\"), require(\"http\"), require(\"yargs\"), require(\"ramda\"), require(\"twilio\"), require(\"cron\"));\n\telse\n\t\troot[\"remind\"] = factory(root[\"babel-polyfill\"], root[\"babel-runtime/core-js/json/stringify\"], root[\"babel-runtime/helpers/classCallCheck\"], root[\"babel-runtime/helpers/createClass\"], root[\"fs\"], root[\"path\"], root[\"http\"], root[\"yargs\"], root[\"ramda\"], root[\"twilio\"], root[\"cron\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_7__, __WEBPACK_EXTERNAL_MODULE_8__, __WEBPACK_EXTERNAL_MODULE_9__, __WEBPACK_EXTERNAL_MODULE_10__, __WEBPACK_EXTERNAL_MODULE_11__, __WEBPACK_EXTERNAL_MODULE_12__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"babel-polyfill\"), require(\"babel-runtime/core-js/json/stringify\"), require(\"babel-runtime/helpers/classCallCheck\"), require(\"babel-runtime/helpers/createClass\"), require(\"fs\"), require(\"path\"), require(\"http\"), require(\"yargs\"), require(\"ramda\"), require(\"twilio\"), require(\"cron\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"remind\", [\"babel-polyfill\", \"babel-runtime/core-js/json/stringify\", \"babel-runtime/helpers/classCallCheck\", \"babel-runtime/helpers/createClass\", \"fs\", \"path\", \"http\", \"yargs\", \"ramda\", \"twilio\", \"cron\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"remind\"] = factory(require(\"babel-polyfill\"), require(\"babel-runtime/core-js/json/stringify\"), require(\"babel-runtime/helpers/classCallCheck\"), require(\"babel-runtime/helpers/createClass\"), require(\"fs\"), require(\"path\"), require(\"http\"), require(\"yargs\"), require(\"ramda\"), require(\"twilio\"), require(\"cron\"));\n\telse\n\t\troot[\"remind\"] = factory(root[\"babel-polyfill\"], root[\"babel-runtime/core-js/json/stringify\"], root[\"babel-runtime/helpers/classCallCheck\"], root[\"babel-runtime/helpers/createClass\"], root[\"fs\"], root[\"path\"], root[\"http\"], root[\"yargs\"], root[\"ramda\"], root[\"twilio\"], root[\"cron\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_7__, __WEBPACK_EXTERNAL_MODULE_8__, __WEBPACK_EXTERNAL_MODULE_9__, __WEBPACK_EXTERNAL_MODULE_10__, __WEBPACK_EXTERNAL_MODULE_11__, __WEBPACK_EXTERNAL_MODULE_12__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t__webpack_require__(1);\n\tmodule.exports = __webpack_require__(2);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"babel-polyfill\");\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _stringify = __webpack_require__(3);\n\t\n\tvar _stringify2 = _interopRequireDefault(_stringify);\n\t\n\tvar _classCallCheck2 = __webpack_require__(4);\n\t\n\tvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\t\n\tvar _createClass2 = __webpack_require__(5);\n\t\n\tvar _createClass3 = _interopRequireDefault(_createClass2);\n\t\n\tvar _fs = __webpack_require__(6);\n\t\n\tvar _fs2 = _interopRequireDefault(_fs);\n\t\n\tvar _path = __webpack_require__(7);\n\t\n\tvar _path2 = _interopRequireDefault(_path);\n\t\n\tvar _http = __webpack_require__(8);\n\t\n\tvar _http2 = _interopRequireDefault(_http);\n\t\n\tvar _yargs = __webpack_require__(9);\n\t\n\tvar _ramda = __webpack_require__(10);\n\t\n\tvar _ramda2 = _interopRequireDefault(_ramda);\n\t\n\tvar _twilio = __webpack_require__(11);\n\t\n\tvar _twilio2 = _interopRequireDefault(_twilio);\n\t\n\tvar _cron = __webpack_require__(12);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar __DURATIONS__ = {\n\t  h: 3600000,\n\t  min: 60000,\n\t  mon: 2592000000,\n\t  y: 31536000000,\n\t  d: 86400000\n\t};\n\tvar __TIMEZONE__ = 'America/Los_Angeles';\n\tvar __CRON_SCHEDULE__ = '* * * * * *';\n\tvar __JOKE_ENDPOINT__ = 'http://api.icndb.com/jokes/random?firstName=Roger&lastName=Feus';\n\t\n\tvar Remind = function () {\n\t  function Remind() {\n\t    (0, _classCallCheck3.default)(this, Remind);\n\t\n\t    this.__twilio = null;\n\t    this.__fetch();\n\t  }\n\t\n\t  (0, _createClass3.default)(Remind, [{\n\t    key: '__fetch',\n\t    value: function __fetch() {\n\t      try {\n\t        var __data = JSON.parse(_fs2.default.readFileSync(_path2.default.resolve('bin/reminders.json'), 'utf8'));\n\t        this.__reminders = __data.reminders;\n\t        this.__sent = __data.sent;\n\t        this.__lubo = __data.lubo;\n\t        this.__config = __data.config;\n\t      } catch (err) {\n\t        _fs2.default.writeFileSync(_path2.default.resolve('bin/reminders.json'), (0, _stringify2.default)({ reminders: [], sent: [], lubo: {}, config: {} }));\n\t        this.__reminders = [];\n\t        this.__sent = [];\n\t        this.__lubo = {};\n\t        this.__config = {};\n\t      }\n\t    }\n\t  }, {\n\t    key: '__payload',\n\t    value: function __payload() {\n\t      return { reminders: this.__reminders, sent: this.__sent, lubo: this.__lubo, config: this.__config };\n\t    }\n\t  }, {\n\t    key: '__reminder',\n\t    value: function __reminder(body) {\n\t      return { to: '+' + this.__config.phone, from: '+' + this.__config.twilioPhone, body: body };\n\t    }\n\t  }, {\n\t    key: '__write',\n\t    value: function __write(cb) {\n\t      _fs2.default.writeFile(_path2.default.resolve('bin/reminders.json'), (0, _stringify2.default)(this.__payload()), function (err) {\n\t        if (err) {\n\t          throw Error('Error adding reminder -- please try again');\n\t        }\n\t        if (cb) {\n\t          cb();\n\t        }\n\t      });\n\t    }\n\t  }, {\n\t    key: '__handleFailure',\n\t    value: function __handleFailure(err) {\n\t      if (err) {\n\t        throw Error('Error sending reminder with id: ' + reminder.id);\n\t      }\n\t    }\n\t  }, {\n\t    key: '__triggerSMS',\n\t    value: function __triggerSMS(data) {\n\t      this.__twilio.sendMessage(this.__reminder.call(this, data.reminder), this.__handleFailure.bind(this));\n\t    }\n\t  }, {\n\t    key: '__send',\n\t    value: function __send() {\n\t      if (this.__reminders.length) {\n\t        var __interval = this.__config.every ? this.__config.every : 'h';\n\t        var __duration = __DURATIONS__[__interval];\n\t        var __now = Date.now();\n\t        if (this.__lubo.ts) {\n\t          var __elapsed = __now - this.__lubo.ts;\n\t          if (__elapsed >= __duration) {\n\t            var __reminder = this.__reminders.pop();\n\t            this.__sent.push(__reminder);\n\t            this.__lubo.ts = Date.now();\n\t            this.__triggerSMS(__reminder);\n\t          }\n\t        } else {\n\t          var _reminder = this.__reminders.pop();\n\t          this.__sent.push(_reminder);\n\t          this.__lubo.ts = Date.now();\n\t          this.__triggerSMS(_reminder);\n\t        }\n\t      } else {\n\t        this.__reminders = this.__sent.slice();\n\t        this.__sent = [];\n\t        if (!this.__reminders.length) {\n\t          throw Error('Error sending reminders -- must add a reminder first');\n\t        }\n\t      }\n\t    }\n\t  }, {\n\t    key: '__activate',\n\t    value: function __activate(on) {\n\t      this.__twilio = (0, _twilio2.default)(on.twilioSID, on.twilioToken);\n\t      this.__config = _ramda2.default.omit(['twilioSID', 'twilioToken'], on);\n\t      var __job = new _cron.CronJob(__CRON_SCHEDULE__, this.__send.bind(this), null, false, __TIMEZONE__);\n\t      this.__write(__job.start.bind(__job));\n\t    }\n\t  }, {\n\t    key: '__add',\n\t    value: function __add(add) {\n\t      var _this = this;\n\t\n\t      if (add.reminder) {\n\t        if (_ramda2.default.find(_ramda2.default.propEq('id', add.id), this.__reminders)) {\n\t          return;\n\t        }\n\t        if (add.reminder === '__random__') {\n\t          _http2.default.get(__JOKE_ENDPOINT__, function (resp) {\n\t            var __respJSON = '';\n\t            resp.on('data', function (chunk) {\n\t              __respJSON += chunk;\n\t            });\n\t            resp.on('end', function () {\n\t              var __resp = JSON.parse(__respJSON);\n\t              if (__resp.type === 'success') {\n\t                var __joke = {\n\t                  id: add.id,\n\t                  tag: 'joke',\n\t                  reminder: __resp.value.joke\n\t                };\n\t                _this.__reminders.push(__joke);\n\t                _this.__write();\n\t              }\n\t            });\n\t          });\n\t        } else {\n\t          this.__reminders.push(add);\n\t          this.__write();\n\t        }\n\t      }\n\t    }\n\t  }, {\n\t    key: '__remove',\n\t    value: function __remove(id) {\n\t      var __idx = _ramda2.default.findIndex(_ramda2.default.propEq('id', id), this.__reminders);\n\t      if (__idx > -1) {\n\t        this.__reminders.splice(__idx, 1);\n\t        this.__write();\n\t        console.log('Successfully removed reminder with id: ' + id);\n\t      } else {\n\t        console.log('No reminder found with id: ' + id);\n\t      }\n\t    }\n\t  }, {\n\t    key: '__routeCommands',\n\t    value: function __routeCommands(__on, __add, __remove) {\n\t      if (__on && __on.phone && __on.twilioSID && __on.twilioToken && __on.twilioPhone) {\n\t        this.__activate(__on);\n\t      }\n\t      if (__add) {\n\t        this.__add(__add);\n\t      }\n\t      if (__remove) {\n\t        this.__remove(__remove.id);\n\t      }\n\t    }\n\t  }, {\n\t    key: 'run',\n\t    value: function run() {\n\t      this.__routeCommands(_yargs.argv.on, _yargs.argv.add, _yargs.argv.remove);\n\t    }\n\t  }]);\n\t  return Remind;\n\t}();\n\n\texports.default = Remind;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"babel-runtime/core-js/json/stringify\");\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"babel-runtime/helpers/classCallCheck\");\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"babel-runtime/helpers/createClass\");\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"fs\");\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"path\");\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"http\");\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"yargs\");\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"ramda\");\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"twilio\");\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"cron\");\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** remind.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap d8f4443bc9fc3e547609\n **/","module.exports = require(\"babel-polyfill\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-polyfill\"\n ** module id = 1\n ** module chunks = 0\n **/","'use strict';\n\nimport fs from 'fs';\nimport path from 'path';\nimport http from 'http';\nimport { argv as args } from 'yargs';\nimport R from 'ramda';\nimport twilio from 'twilio';\nimport { CronJob as cron } from 'cron';\nconst __DURATIONS__ = {\n  h: 3600000,\n  min: 60000,\n  mon: 2592000000,\n  y: 31536000000,\n  d: 86400000\n};\nconst __TIMEZONE__ = 'America/Los_Angeles';\nconst __CRON_SCHEDULE__ = '* * * * * *';\nconst __JOKE_ENDPOINT__ = 'http://api.icndb.com/jokes/random?firstName=Roger&lastName=Feus';\n\nexport default class Remind {\n\n  constructor() {\n    this.__twilio = null;\n    this.__fetch();\n  }\n\n  __fetch() {\n    try {\n      let __data = JSON.parse(fs.readFileSync(path.resolve('bin/reminders.json'), 'utf8'));\n      this.__reminders = __data.reminders;\n      this.__sent = __data.sent;\n      this.__lubo = __data.lubo;\n      this.__config = __data.config;\n    } catch (err) {\n      fs.writeFileSync(path.resolve('bin/reminders.json'), JSON.stringify({ reminders: [], sent: [], lubo: {}, config: {} }));\n      this.__reminders = [];\n      this.__sent = [];\n      this.__lubo = {};\n      this.__config = {};\n    }\n  }\n\n  __payload() {\n    return { reminders: this.__reminders, sent: this.__sent, lubo: this.__lubo, config: this.__config };\n  }\n\n  __reminder(body) {\n    return { to: `+${this.__config.phone}`, from: `+${this.__config.twilioPhone}`, body: body };\n  }\n\n  __write(cb) {\n    fs.writeFile(path.resolve('bin/reminders.json'), JSON.stringify(this.__payload()), (err) => {\n      if (err) {\n        throw Error('Error adding reminder -- please try again');\n      }\n      if (cb) {\n        cb();\n      }\n    });\n  }\n\n  __handleFailure(err) {\n    if (err) {\n      throw Error(`Error sending reminder with id: ${reminder.id}`);\n    }\n  }\n\n  __triggerSMS(data) {\n    this.__twilio.sendMessage(this.__reminder.call(this, data.reminder), this.__handleFailure.bind(this));\n  }\n\n  __send() {\n    if (this.__reminders.length) {\n      let __interval = this.__config.every ? this.__config.every : 'h';\n      let __duration = __DURATIONS__[__interval];\n      let __now = Date.now();\n      if (this.__lubo.ts) {\n        let __elapsed = __now - this.__lubo.ts;\n        if ( __elapsed >= __duration) {\n          let __reminder = this.__reminders.pop();\n          this.__sent.push(__reminder);\n          this.__lubo.ts = Date.now();\n          this.__triggerSMS(__reminder);\n        }\n      } else {\n        let __reminder = this.__reminders.pop();\n        this.__sent.push(__reminder);\n        this.__lubo.ts = Date.now();\n        this.__triggerSMS(__reminder);\n      }\n    } else {\n      this.__reminders = this.__sent.slice();\n      this.__sent = [];\n      if (!this.__reminders.length) {\n        throw Error('Error sending reminders -- must add a reminder first');\n      }\n    }\n  }\n\n  __activate(on) {\n    this.__twilio = twilio(on.twilioSID, on.twilioToken);\n    this.__config = R.omit(['twilioSID', 'twilioToken'], on);\n    let __job = new cron(__CRON_SCHEDULE__, this.__send.bind(this), null, false, __TIMEZONE__);\n    this.__write(__job.start.bind(__job));\n  }\n\n  __add(add) {\n    if (add.reminder) {\n      if (R.find(R.propEq('id', add.id), this.__reminders)) {\n        return;\n      }\n      if (add.reminder === '__random__') {\n        http.get(__JOKE_ENDPOINT__, (resp) => {\n          let __respJSON = '';\n          resp.on('data', (chunk) => {\n            __respJSON += chunk;\n          });\n          resp.on('end', () => {\n            let __resp = JSON.parse(__respJSON);\n            if (__resp.type === 'success') {\n              let __joke = {\n                id: add.id,\n                tag: 'joke',\n                reminder: __resp.value.joke\n              };\n              this.__reminders.push(__joke);\n              this.__write();\n            }\n          });\n        });\n      } else {\n        this.__reminders.push(add);\n        this.__write();\n      }\n    }\n  }\n\n  __remove(id) {\n    let __idx = R.findIndex(R.propEq('id', id), this.__reminders);\n    if (__idx > -1) {\n      this.__reminders.splice(__idx, 1);\n      this.__write();\n      console.log(`Successfully removed reminder with id: ${id}`);\n    } else {\n      console.log(`No reminder found with id: ${id}`);\n    }\n  }\n\n  __routeCommands(__on, __add, __remove) {\n    if (__on && __on.phone && __on.twilioSID && __on.twilioToken && __on.twilioPhone) {\n      this.__activate(__on);\n    }\n    if (__add) {\n      this.__add(__add);\n    }\n    if (__remove) {\n      this.__remove(__remove.id);\n    }\n  }\n\n  run() {\n    this.__routeCommands(args.on, args.add, args.remove);\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/remind.js\n **/","module.exports = require(\"babel-runtime/core-js/json/stringify\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-runtime/core-js/json/stringify\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = require(\"babel-runtime/helpers/classCallCheck\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-runtime/helpers/classCallCheck\"\n ** module id = 4\n ** module chunks = 0\n **/","module.exports = require(\"babel-runtime/helpers/createClass\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"babel-runtime/helpers/createClass\"\n ** module id = 5\n ** module chunks = 0\n **/","module.exports = require(\"fs\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"fs\"\n ** module id = 6\n ** module chunks = 0\n **/","module.exports = require(\"path\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"path\"\n ** module id = 7\n ** module chunks = 0\n **/","module.exports = require(\"http\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"http\"\n ** module id = 8\n ** module chunks = 0\n **/","module.exports = require(\"yargs\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"yargs\"\n ** module id = 9\n ** module chunks = 0\n **/","module.exports = require(\"ramda\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"ramda\"\n ** module id = 10\n ** module chunks = 0\n **/","module.exports = require(\"twilio\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"twilio\"\n ** module id = 11\n ** module chunks = 0\n **/","module.exports = require(\"cron\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"cron\"\n ** module id = 12\n ** module chunks = 0\n **/"],"sourceRoot":""}